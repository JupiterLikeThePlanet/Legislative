<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

    <title>Legislative</title>
    <link rel="shortcut icon" href="../images/favicon.ico" />
    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Other Stylesheets -->
    <link rel="stylesheet" href="/stylesheets/style.css">
    <link rel="stylesheet" href="/stylesheets/index.css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <script src="/javascripts/global.js"></script>

    <!-- Bootstrap JS -->
    <script src="/js/bootstrap.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/1.0.2/Chart.js"></script>
    <script type='text/javascript', src="https://code.highcharts.com/highcharts.js"></script>
    <script type='text/javascript', src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/heatmap.js"></script>
    <script src="https://code.highcharts.com/modules/treemap.js"></script>
  </head>




<!-- ***** BODY CONTENT ***** -->
  <body data-spy="scroll" data-target=".navbar" data-offset="50">

    <nav class="navbar navbar-default navbar-fixed-top">
      <a class="navbar-brand" href="/">Legislative</a>
      <a class="navbar-brand" href="#chart-1-container">Chart 1</a>
      <a class="navbar-brand" href="#chart-2-container">Chart 2</a>
      <a class="navbar-brand" href="#chart-3-container">Chart 3</a>
      <a class="navbar-brand" href="#chart-4-container">Chart 4</a>
    </nav>

    <!-- **** CHART 1 **** -->
    <div class="chart-containers" id="chart-1-container">
      <canvas id="upcomingBills" width="600" height="600"></canvas>
      <script>

        var ctx = document.getElementById("upcomingBills").getContext("2d");

        $.ajax({
          type: 'GET',
          url: '/bills/bill_data'
        }).done(function(response){
          var bill_data = response;
          new Chart(ctx).PolarArea(bill_data, {animation:true, animationSteps: 250, animateRotate : true, animateScale : true});
        });
      </script>
    </div> <!-- '#chart-1-container' -->

    <!-- Floor Updates Feed -->
    <div id='bill-list-container'>
      <h2>Floor Updates</h2>
      <div id="billList">
        <table>
          <thead>
            <th>BillName</th>
            <th>Description</th>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </div>

    <div class="chart-containers" id='chart-2-container' >
      <h1>Bill in this Congressional Session</h1>
      <canvas id="current_session" width="600" height="600"></canvas>

      <script>
        var congress = document.getElementById("current_session").getContext("2d");

        var sessionData = {
          labels: ["Agriculture", "Education", "Defense", "Water Mgmt", "NASA", "HUD", "Immigration"],
          datasets: [
            {
              label: "Active",
              fillColor: "rgba(220,220,220,0.5)",
              strokeColor: "rgba(220,220,220,0.8)",
              highlightFill: "rgba(220,220,220,0.75)",
              highlightStroke: "rgba(220,220,220,1)",
              data: [65, 59, 80, 81, 56, 55, 90]
            }
          ]
        };
        new Chart(congress).Bar(sessionData, {scaleShowHorizontalLines: false, barStrokeWidth : 1});

      </script>
    </div>

    <div class="chart-containers" id='chart-4-container'>
      <div id="session" style="width:100%; height:400px;">
        <script>
          $(function () {
            $('#session').highcharts({
                chart: {
                    type: 'bar'
                },
                title: {
                    text: 'Active, Pass, Fail status of bills in this Congressional Session'
                },
                xAxis: {
                    categories: ["Agriculture", "Education", "Defense", "Water Mgmt", "NASA", "HUD", "Immigration"]
                },
                yAxis: {
                    title: {
                        text: 'Status'
                    }
                },
                series: [{
                    name: 'Active',
                    data: [5, 7, 3]
                }, {
                    name: 'Pass',
                    data: [2,3,1]
                }, {
                    name: 'Fail',
                    data: [1, 0, 2]
                }]
            });
          });
        </script>

      </div>
    </div> <!-- #chart-4-container END -->
    
<!-- start code on expandHighCharts branch -->
  <div id="houseVsSenate" style="min-width: 310px; max-width: 800px; height: 400px; margin: 0 auto"></div>
  <script>
  $(function () {

    var categories = ['Agriculture', 'DARPA', 'Education', 'Defense',
            'Water', 'Climate Change', 'Foreign Relations', 'Immigration', 'Veteran Affairs',
            'Defunding Saskatoon ', 'Appropriations', 'Ethics', 'Judiciary', 'Rules',
            'Budget', 'Small Business', 'Ways & Means', 'Homeland Security', 'Environment and Public Works',
            'Energy and National Resources', 'Science, Space, & Tech'];
    $(document).ready(function () {
        $('#houseVsSenate').highcharts({
            chart: {
                type: 'bar'
            },
            title: {
                text: 'House vs. Senate'
            },
            // subtitle: {
            //     text: 'Source: <a href="http://populationpyramid.net/germany/2015/">Population Pyramids of the World from 1950 to 2100</a>'
            // },
            xAxis: [{
                categories: categories,
                reversed: false,
                labels: {
                    step: 1
                }
            }, { // mirror axis on right side
                opposite: true,
                reversed: false,
                categories: categories,
                linkedTo: 0,
                labels: {
                    step: 1
                }
            }],
            yAxis: {
                title: {
                    text: 'Committees'
                },
                labels: {
                    formatter: function () {

                        return Math.abs(this.value);
                    }
                }
            },

            plotOptions: {
                series: {
                    stacking: 'normal'
                }
            },

            tooltip: {
                formatter: function () {
                    return '<b>' + this.series.name + ', age ' + this.point.category + '</b><br/>' +
                        'Population: ' + Highcharts.numberFormat(Math.abs(this.point.y), 0);
                }
            },

            series: [{
                name: 'House',
                data: [-2.2, -2.2, -2.3, -2.5, -2.7, -3.1, -3.2,
                    -3.0, -3.2, -4.3, -4.4, -3.6, -3.1, -2.4,
                    -2.5, -2.3, -1.2, -0.6, -0.2, -0.0, -0.0]
            }, {
                name: 'Senate',
                data: [2.1, 2.0, 2.2, 2.4, 2.6, 3.0, 3.1, 2.9,
                    3.1, 4.1, 4.3, 3.6, 3.4, 2.6, 2.9, 2.9,
                    1.8, 1.2, 0.6, 0.1, 0.0]
            }]
        });
    });

});
</script>

<div id="bill-by-committee">

<script>
  $(function () {
    var data = {
            'Aging': {
                'Bill to help old people like Mary': {
                    "url": '673',
                    "Description": '75.5',
                    // 'IDforBill': '89.0',
                },
                'The Mitochondrial Free Radical Theory of Aging': {
                    "url": '73',
                    "Description": '234.6'
                    // 'IDforBill': '64.0',
                },
                ' Rejuvenation Research': {
                    "url": '73',
                    "Description": '316.4',
                    // 'IDforBill': '102.0',
                },
                'Aubrey de Grey': {
                    "url": '73',
                    "Description": '59.2'
                    // 'IDforBill': '35.0',
                },
                'SENS Research Foundation': {
                    "url": '73',
                    "Description": '117.3'
                    // 'IDforBill': '91.9',
                },

            },
            'Small Business': {
                'Awesome bill to help small business owners': {
                    "url": '73',
                    "Description": '16.8',
                    // 'IDforBill': '44.3'
                },
                'Another bill to help SM get health care': {
                    "url": '73',
                    "Description": '22.6',
                    // 'IDforBill': '48.9'
                },
            },

        },
        points = [],
        committeeP,
        committeeVal,
        committeeI = 0,
        indvBillsP,
        indvBillsI,
        causeP,
        causeI,
        committee,
        indvBills,
        cause,
        causeName = {
            "url": "<a href='#'>Click for bill details'</a>",
            'Description': 'Bill details'
            // 'IDforBill': 'Bill id'


        };

    for (committee in data) {
        if (data.hasOwnProperty(committee)) {
            committeeVal = 0;
            committeeP = {
                id: 'id_' + committeeI,
                name: committee,
                color: Highcharts.getOptions().colors[committeeI]
            };
            indvBillsI = 0;
            for (indvBills in data[committee]) {
                if (data[committee].hasOwnProperty(indvBills)) {
                    indvBillsP = {
                        id: committeeP.id + '_' + indvBillsI,
                        name: indvBills,
                        parent: committeeP.id
                    };
                    points.push(indvBillsP);
                    causeI = 0;
                    for (cause in data[committee][indvBills]) {
                        if (data[committee][indvBills].hasOwnProperty(cause)) {
                            causeP = {
                                id: indvBillsP.id + '_' + causeI,
                                name: causeName[cause],
                                parent: indvBillsP.id,
                                value: Math.round(+data[committee][indvBills][cause])
                            };
                            committeeVal += causeP.value;
                            points.push(causeP);
                            causeI = causeI + 1;
                        }
                    }
                    indvBillsI = indvBillsI + 1;
                }
            }
            committeeP.value = Math.round(committeeVal / indvBillsI);
            points.push(committeeP);
            committeeI = committeeI + 1;
        }
    }
    $('#bill-by-committee').highcharts({
        series: [{
            type: 'treemap',
            layoutAlgorithm: 'squarified',
            allowDrillToNode: true,
            dataLabels: {
                enabled: false
            },
            levelIsConstant: false,
            levels: [{
                level: 1,
                layoutAlgorithm: 'stripes',
                color: 'red',
                // point: {
                //   click: function(){
                //     var someURL = this.series.userOptions.URLs[this.x];
                //     if (someURL)
                //       window.open('')
                //   }
                // }
                // plotOptions: {
                //     allowPointSelect: true,
                    // cursor: 'pointer',
                    // dataLabels {
                    //   enabled: true
                    // }
                //     events:{
                //       click: function (event) {
                //         alert(event.point.name);
                //         // add your redirect code and u can get data using event.point
                //           console.log('The click is working!')

                //       }
                //     }

                    // useHTML: true
                    // formatter: function(){
                    //   return '<div class="bill-link">' + this.level.name + '</div>';
                    // }




                  // }
                dataLabels: {
                    enabled: true

                    // useHTML: true
                    // formatter: function(){
                    //   return '<div class="bill-link">' + this.level.name + '</div>';
                    // }

                    // events:{
                    //     click: function (event) {
                    //                alert(event.point.name);
                    //             // add your redirect code and u can get data using event.point
                    //     }
                    // }



                },
                borderWidth: 3

                // point: {
                //   events: {
                //     click: function(e) {
                //       //this.slice();
                //       //console.log(e);
                //       location.href = e.point.url;
                //       e.preventDefault();
                //     }
                //   }
                // },

            }],
            data: points
        }],
        // plotOptions: {
        //   allowPointSelect: true,
        //   cursor: 'pointer',
        //   dataLabels
        // }


        title: {
            text: 'Bills by Committee (Per Session)'
        }
    });
});

// $(".bill-link").on('click', function(){
//   console.log('The click is working!')
// })

</script>
</div>

>>>>>>> master

  </body>
</html>
